{"ast":null,"code":"import _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _initializerDefineProperty from \"@babel/runtime/helpers/esm/initializerDefineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _applyDecoratedDescriptor from \"@babel/runtime/helpers/esm/applyDecoratedDescriptor\";\nimport _initializerWarningHelper from \"@babel/runtime/helpers/esm/initializerWarningHelper\";\n\nvar _dec, _dec2, _dec3, _dec4, _class, _descriptor, _descriptor2, _temp, _dec5, _dec6, _dec7, _dec8, _dec9, _dec10, _dec11, _dec12, _class3, _descriptor3, _descriptor4, _descriptor5, _descriptor6, _temp2;\n\nimport { prop, getModelForClass } from '@typegoose/typegoose';\nimport { UserAppRight } from '../../shared/user';\nexport var AppOwnership = (_dec = prop({\n  required: true\n}), _dec2 = Reflect.metadata(\"design:type\", String), _dec3 = prop({\n  required: true\n}), _dec4 = Reflect.metadata(\"design:type\", typeof UserAppRight === \"undefined\" ? Object : UserAppRight), (_class = (_temp = function AppOwnership() {\n  _classCallCheck(this, AppOwnership);\n\n  _initializerDefineProperty(this, \"id\", _descriptor, this);\n\n  _initializerDefineProperty(this, \"right\", _descriptor2, this);\n}, _temp), (_descriptor = _applyDecoratedDescriptor(_class.prototype, \"id\", [_dec, _dec2], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor2 = _applyDecoratedDescriptor(_class.prototype, \"right\", [_dec3, _dec4], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n})), _class));\n;\nexport var User = (_dec5 = prop({\n  required: true\n}), _dec6 = Reflect.metadata(\"design:type\", String), _dec7 = prop({\n  \"default\": []\n}), _dec8 = Reflect.metadata(\"design:type\", Array), _dec9 = prop(), _dec10 = Reflect.metadata(\"design:type\", Boolean), _dec11 = prop({\n  required: true\n}), _dec12 = Reflect.metadata(\"design:type\", String), (_class3 = (_temp2 =\n/*#__PURE__*/\nfunction () {\n  function User() {\n    _classCallCheck(this, User);\n\n    _initializerDefineProperty(this, \"username\", _descriptor3, this);\n\n    _initializerDefineProperty(this, \"apps\", _descriptor4, this);\n\n    _initializerDefineProperty(this, \"isAdmin\", _descriptor5, this);\n\n    _initializerDefineProperty(this, \"hashedPassword\", _descriptor6, this);\n  }\n\n  _createClass(User, [{\n    key: \"isValidPassword\",\n    value: function isValidPassword(password) {\n      return User.hash(password) === password;\n    }\n  }, {\n    key: \"hasRight\",\n    value: function hasRight(app, right) {\n      var own = this.apps.find(function (a) {\n        return a.id === app;\n      });\n      return own ? (own.right & right) === right : false;\n    }\n  }, {\n    key: \"getPublicData\",\n    value: function getPublicData() {\n      return {\n        id: this._id,\n        username: this.username,\n        isAdmin: this.isAdmin,\n        apps: this.apps\n      };\n    } // todo: proper hashing\n\n  }], [{\n    key: \"hash\",\n    value: function hash(input) {\n      return input;\n    }\n  }]);\n\n  return User;\n}(), _temp2), (_descriptor3 = _applyDecoratedDescriptor(_class3.prototype, \"username\", [_dec5, _dec6], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor4 = _applyDecoratedDescriptor(_class3.prototype, \"apps\", [_dec7, _dec8], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor5 = _applyDecoratedDescriptor(_class3.prototype, \"isAdmin\", [_dec9, _dec10], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor6 = _applyDecoratedDescriptor(_class3.prototype, \"hashedPassword\", [_dec11, _dec12], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n})), _class3));\n;\nexport var UserModel = getModelForClass(User);","map":null,"metadata":{},"sourceType":"module"}