{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport { withRedux } from '../client/middlewares/redux';\nimport { withAuth } from '../client/middlewares/auth';\nimport { useSelector } from 'react-redux';\nimport useSWR from 'swr';\nimport { fetcher } from '../client/util';\nimport { UserAppRight } from '../shared/user';\nimport Layout from '../client/components/Layout';\nimport Icon from '../client/components/Icon';\nimport TableHead from '../client/components/TableHead';\nimport ErrorDisplay from '../client/components/ErrorDisplay';\n\nfunction AdminInfoPanel() {\n  return __jsx(\"div\", {\n    className: \"is-block\",\n    style: {\n      padding: '10px'\n    }\n  }, __jsx(\"p\", null, \"You are an admin and have full access to the dashboard. These are the things you can do:\"), __jsx(\"div\", {\n    className: \"content is-small\"\n  }, __jsx(\"ul\", null, __jsx(\"li\", null, \"View, manage and interact with all applications.\"), __jsx(\"li\", null, \"Deploy new applications.\"), __jsx(\"li\", null, \"Create and manage other users.\"))));\n}\n\nvar permissions = [UserAppRight.VIEW, UserAppRight.MANAGE, UserAppRight.INTERACT, UserAppRight.DELETE];\n\nfunction AppRow(props) {\n  var app = props.app;\n  return __jsx(\"tr\", null, __jsx(\"td\", null, app.id), permissions.map(function (p) {\n    var has = (app.right & p) === p;\n    return __jsx(\"td\", {\n      key: p\n    }, __jsx(Icon, {\n      style: {\n        display: 'inline'\n      },\n      className: \"has-text-\".concat(has ? 'success' : 'danger'),\n      icon: has ? 'fa-check' : 'fa-times'\n    }));\n  }));\n}\n\nfunction AppsList(props) {\n  var apps = props.apps;\n\n  if (!apps) {\n    return __jsx(\"progress\", {\n      className: \"progress is-small is-link\",\n      max: \"100\"\n    }, \"Loading...\");\n  }\n\n  if (apps.length === 0) {\n    return __jsx(\"div\", {\n      style: {\n        width: '100%',\n        textAlign: 'center'\n      }\n    }, __jsx(\"p\", {\n      style: {\n        margin: '10px'\n      }\n    }, \"You do not have access to any application.\"));\n  }\n\n  return __jsx(\"div\", {\n    className: \"table-container\",\n    style: {\n      width: '100%'\n    }\n  }, __jsx(\"style\", null, \"tr > th, td { text-align: center!important; }\"), __jsx(\"table\", {\n    className: \"table is-fullwidth is-bordered is-striped is-hoverable\",\n    style: {\n      textAlign: 'center',\n      tableLayout: 'auto'\n    }\n  }, __jsx(TableHead, {\n    columns: ['application', 'view', 'manage', 'interact', 'delete']\n  }), __jsx(\"tbody\", null, apps.map(function (a) {\n    return __jsx(AppRow, {\n      key: a.id,\n      app: a\n    });\n  }))));\n}\n\nexport default withRedux(withAuth(function () {\n  var _ref, _error$response, _ref2, _error$response2, _error$response2$data;\n\n  var client = useSelector(function (state) {\n    return state.client;\n  });\n\n  var _useSWR = useSWR('/api/me', fetcher),\n      data = _useSWR.data,\n      error = _useSWR.error;\n\n  return __jsx(Layout, null, __jsx(\"div\", {\n    className: \"container panel is-link\"\n  }, __jsx(\"div\", {\n    className: \"panel-heading\"\n  }, client.username, client.isAdmin && __jsx(Icon, {\n    icon: \"fa-user-shield\",\n    style: {\n      marginLeft: '10px',\n      display: 'inline'\n    }\n  })), __jsx(\"div\", {\n    className: \"panel-block\",\n    style: {\n      width: '100%'\n    }\n  }, error ? __jsx(ErrorDisplay, {\n    style: {\n      width: '100%'\n    },\n    title: (_ref = (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.statusText) !== null && _ref !== void 0 ? _ref : 'Error',\n    text: (_ref2 = (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : _error$response2$data.message) !== null && _ref2 !== void 0 ? _ref2 : error.toString()\n  }) : __jsx(React.Fragment, null, client.isAdmin ? __jsx(AdminInfoPanel, null) : __jsx(AppsList, {\n    apps: data === null || data === void 0 ? void 0 : data.user.apps\n  })))));\n}));","map":null,"metadata":{},"sourceType":"module"}