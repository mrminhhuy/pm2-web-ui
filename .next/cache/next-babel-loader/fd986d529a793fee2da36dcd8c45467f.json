{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport Router from 'next/router';\nimport { useState, useEffect, useRef } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { withRedux } from '../client/middlewares/redux';\nimport { withAuth } from '../client/middlewares/auth';\nimport axios from 'axios';\nimport Navbar from '../client/components/Navbar';\n\nvar redirect = function redirect() {\n  return Router.push('/');\n};\n\nexport default withRedux(withAuth(function () {\n  var isMounted = useRef(true);\n\n  var _useState = useState(null),\n      error = _useState[0],\n      setError = _useState[1];\n\n  var dispatch = useDispatch();\n  useEffect(function () {\n    axios.post('/api/logout').then(function () {\n      if (!isMounted) {\n        return;\n      }\n\n      dispatch({\n        type: 'auth',\n        client: null\n      });\n      redirect();\n    })[\"catch\"](function (err) {\n      var _err$response, _err$response$data, _err$response$statusT;\n\n      if (!isMounted) {\n        return;\n      }\n\n      var msg = (_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message;\n      setError(msg ? [(_err$response$statusT = err.response.statusText) !== null && _err$response$statusT !== void 0 ? _err$response$statusT : 'Error', msg] : ['Error', err.toString()]);\n    });\n  }, []);\n  return __jsx(\"div\", null, __jsx(Navbar, null), __jsx(\"div\", {\n    className: \"columns is-centered\"\n  }, __jsx(\"div\", {\n    className: \"column is-4-tablet is-3-fullhd box\",\n    style: {\n      margin: '40px 25px 20px 25px',\n      textAlign: 'center'\n    }\n  }, __jsx(\"h1\", {\n    className: \"subtitle\"\n  }, \"Logging out...\"), __jsx(\"progress\", {\n    className: \"progress is-small \".concat(error ? 'is-danger' : 'is-info'),\n    max: \"100\"\n  }), error && __jsx(\"article\", {\n    className: \"message is-danger\"\n  }, __jsx(\"div\", {\n    className: \"message-header\"\n  }, __jsx(\"p\", null, error[0]), __jsx(\"button\", {\n    className: \"delete\",\n    \"aria-label\": \"delete\",\n    onClick: function onClick() {\n      return setError(null);\n    }\n  })), __jsx(\"div\", {\n    className: \"message-body\"\n  }, error[1])))));\n}));","map":null,"metadata":{},"sourceType":"module"}