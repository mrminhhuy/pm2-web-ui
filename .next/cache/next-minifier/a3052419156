{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{\"8oxB\":function(e,t){var n,r,a=e.exports={};function l(){throw new Error(\"setTimeout has not been defined\")}function o(){throw new Error(\"clearTimeout has not been defined\")}function i(e){if(n===setTimeout)return setTimeout(e,0);if((n===l||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n=\"function\"===typeof setTimeout?setTimeout:l}catch(e){n=l}try{r=\"function\"===typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var s,c=[],u=!1,p=-1;function d(){u&&s&&(u=!1,s.length?c=s.concat(c):p=-1,c.length&&f())}function f(){if(!u){var e=i(d);u=!0;for(var t=c.length;t;){for(s=c,c=[];++p<t;)s&&s[p].run();p=-1,t=c.length}s=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function b(e,t){this.fun=e,this.array=t}function v(){}a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new b(e,t)),1!==c.length||u||i(f)},b.prototype.run=function(){this.fun.apply(null,this.array)},a.title=\"browser\",a.browser=!0,a.env={},a.argv=[],a.version=\"\",a.versions={},a.on=v,a.addListener=v,a.once=v,a.off=v,a.removeListener=v,a.removeAllListeners=v,a.emit=v,a.prependListener=v,a.prependOnceListener=v,a.listeners=function(e){return[]},a.binding=function(e){throw new Error(\"process.binding is not supported\")},a.cwd=function(){return\"/\"},a.chdir=function(e){throw new Error(\"process.chdir is not supported\")},a.umask=function(){return 0}},Ozl8:function(e,t,n){\"use strict\";var r=n(\"wx14\"),a=n(\"Ff2n\"),l=n(\"q1tI\"),o=n.n(l),i=n(\"DBJP\"),s=o.a.createElement;t.a=function(e){var t=e.pull,n=void 0===t?\"right\":t,l=Object(a.a)(e,[\"pull\"]);return s(i.a,Object(r.a)({className:n?\"is-pulled-\".concat(n):\"\",icon:\"fa-layer-group\",style:{marginLeft:\"10px\",display:\"inline\"}},l))}},TPrw:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/apps/[id]\",function(){return n(\"hPbj\")}])},hPbj:function(e,t,n){\"use strict\";n.r(t);var r=n(\"wx14\"),a=n(\"o0o1\"),l=n.n(a),o=n(\"q1tI\"),i=n.n(o),s=n(\"nOHt\"),c=n(\"/MKj\"),u=n(\"VtrM\"),p=n(\"UJ/n\"),d=n(\"muLP\"),f=n(\"AD/7\"),b=n(\"vDqi\"),v=n.n(b),m=n(\"jcc4\"),O=n(\"rePB\"),h=n(\"Ff2n\"),g=n(\"DBJP\"),y=i.a.createElement,j={disabled:!0,text:\"...\",icon:\"fa-bug\",color:\"is-danger\"},w=function(e){var t=e.traits,n=e.status,a=e.disabled,l=e.loading,o=void 0!==l&&l,i=Object(h.a)(e,[\"traits\",\"status\",\"disabled\",\"loading\"]),s=t[n]||j,c=s.disabled,u=s.text,p=s.icon,d=s.color;return y(\"button\",Object(r.a)({className:\"button \".concat(d,\" \").concat(o?\"is-loading\":\"\"),disabled:c||o||a},i),y(g.a,{className:\"is-small\",icon:p}),y(\"span\",null,u))},E=i.a.createElement;function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){Object(O.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P=Object(O.a)({stopped:{disabled:!1,text:\"Start\",icon:\"fa-play\",color:\"is-success\"},online:{disabled:!1,text:\"Stop\",icon:\"fa-stop\",color:\"is-danger\"},stopping:null,launching:null,errored:null},\"one-launch-status\",null);P.errored=P.stopped,P[\"one-launch-status\"]=P.online,P.stopping=x({},P.stopped,{disabled:!0}),P.launching=x({},P.online,{disabled:!0});var T=function(e){return E(w,Object(r.a)({},e,{traits:P}))},_=i.a.createElement;function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var L=Object(O.a)({online:{disabled:!1,text:\"Restart\",icon:\"fa-redo-alt\",color:\"is-link\"},stopping:null,launching:null,errored:null,stopped:null},\"one-launch-status\",null);L.stopped=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){Object(O.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},L.online,{disabled:!0}),L.errored=L.stopped,L[\"one-launch-status\"]=L.stopped,L.stopping=L.stopped,L.launching=L.stopped;var D=function(e){return _(w,Object(r.a)({},e,{traits:L}))},A=i.a.createElement;function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var R=Object(O.a)({stopped:{disabled:!1,text:\"Delete\",icon:\"fa-trash-alt\",color:\"is-dark\"},stopping:null,launching:null,errored:null,online:null},\"one-launch-status\",null);R.errored=R.stopped,R.online=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){Object(O.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},R.stopped,{disabled:!0}),R[\"one-launch-status\"]=R.online,R.stopping=R.online,R.launching=R.online;var C=function(e){return A(w,Object(r.a)({},e,{traits:R}))},I=i.a.createElement,U=function(e){var t=e.title,n=e.children,r=void 0===n?null:n,a=e.onUpdate,l=void 0===a?null:a,o=e.canUpdate,i=void 0!==o&&o;return I(\"div\",{className:\"container panel is-info\"},I(\"div\",{className:\"panel-heading\"},t,I(\"a\",{className:\"button button-primary is-pulled-right is-light is-outlined \".concat(i?\"\":\"is-loading\"),style:{marginTop:\"-6px\"},onClick:function(){return i&&l()}},\"Update\")),I(\"div\",{className:\"panel-block\",style:{width:\"100%\"}},r))},B=n(\"3xcS\"),M=n(\"mBNB\"),G=n(\"nLWT\"),q=i.a.createElement;function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var F=Object(O.a)({online:{disabled:!1,text:\"Reload\",icon:\"fa-sync-alt\",color:\"is-primary\"},stopping:null,launching:null,errored:null,stopped:null},\"one-launch-status\",null);F.stopped=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){Object(O.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},F.online,{disabled:!0}),F.errored=F.stopped,F[\"one-launch-status\"]=F.stopped,F.stopping=F.stopped,F.launching=F.stopped;var J=function(e){return q(w,Object(r.a)({},e,{traits:F}))},V=n(\"Ozl8\"),W=i.a.createElement,z=[{title:\"Monitoring\",element:function(e){var t=e.app,n=t.monit,r=t.pm2_env,a=n.cpu,l=n.memory,o=r.status;return W(\"table\",{className:\"table status-table is-fullwidth is-centered\"},W(\"thead\",null,W(\"tr\",{className:\"is-size-5 \".concat(o===M.a.ONLINE||o===M.a.ONE_LAUNCH?\"is-online\":\"is-offline\")},W(\"th\",null,\"status\"),W(\"th\",null,\"memory\"),W(\"th\",null,\"cpu\"))),W(\"tbody\",null,W(\"tr\",null,W(\"td\",null,o),W(\"td\",null,(l/K).toFixed(2),\"mb\"),W(\"td\",null,a,\"%\"))))}},{title:\"Details\",element:function(e){var t=e.app,n=t.pid,r=t.pm_id,a=(t.name,t.pm2_env),l=a.pm_exec_path,o=a.exec_mode,i=a.exec_interpreter,s=a.restart_time,c=a.unstable_restarts,u=a.pm_out_log_path,p=a.pm_err_log_path;return W(\"div\",null,W(\"div\",{className:\"field\"},W(\"label\",{className:\"label\"},\"Script Path\"),W(\"div\",{className:\"control\"},W(\"input\",{className:\"input\",type:\"text\",value:l,readOnly:!0}))),W(\"label\",{className:\"label\"},\"Output Path\"),W(\"div\",{className:\"field is-grouped\"},W(\"div\",{className:\"control is-expanded\"},W(\"input\",{className:\"input\",type:\"text\",value:u,readOnly:!0})),W(\"div\",{className:\"control is-expanded\"},W(\"input\",{className:\"input\",type:\"text\",value:p,readOnly:!0}))),W(\"table\",{className:\"table is-fullwidth is-bordered\"},W(\"thead\",null,W(\"tr\",null,W(\"th\",null,\"pm_id\"),W(\"th\",null,\"pid\"),W(\"th\",null,\"exec_mode\"),W(\"th\",null,\"exec_interpreter\"))),W(\"tbody\",null,W(\"tr\",null,W(\"td\",null,r),W(\"td\",null,n),W(\"td\",null,o),W(\"td\",null,i))),W(\"thead\",null,W(\"tr\",null,W(\"th\",{colSpan:2},\"restarts\"),W(\"th\",{colSpan:2},\"unstable_restarts\"))),W(\"tbody\",null,W(\"tr\",null,W(\"td\",{colSpan:2},s),W(\"td\",{colSpan:2},c)))))}},{title:\"Environment\",element:function(e){var t=e.app,n=t.name,r=t.pm2_env.env,a=Object.keys(r).filter((function(e){return e!=n}));return W(\"div\",{className:\"table-container\",style:{width:\"100%\"}},W(\"table\",{className:\"table is-narrow is-fullwidth is-bordered auto-overflow\",style:{tableLayout:\"fixed\"}},W(\"thead\",null,W(\"tr\",null,W(\"th\",null,\"env_variable\"),W(\"th\",null,\"value\"))),W(\"tbody\",null,0===a.length?W(\"tr\",null,W(\"td\",{colSpan:2},\"There are no environment variables.\")):a.map((function(e){return W(\"tr\",{key:e},W(\"td\",null,e),W(\"td\",null,r[e].toString()))})))))}},{title:\"Logs\",element:function(e){var t,n,r,a,l,o=e.app,i=o.name,s=o.pm_id,c=Object(u.a)(\"/api/apps/\".concat(i,\"/\").concat(s,\"/logs\"),p.a,{refreshInterval:3e3}),d=c.data,f=c.error,b=c.isValidating;return f?W(B.a,{title:null!==(t=null===(n=f.response)||void 0===n?void 0:n.statusText)&&void 0!==t?t:\"Error\",text:null!==(r=null===(a=f.response)||void 0===a?void 0:null===(l=a.data)||void 0===l?void 0:l.message)&&void 0!==r?r:f.toString()}):W(\"div\",null,W(\"div\",{className:\"field\"},W(\"label\",{className:\"label\"},\"Output Logs\"),W(\"div\",{className:\"control \".concat(!d||b?\"is-loading\":\"\")},W(\"textarea\",{className:\"textarea\",readOnly:!0,rows:15,value:null===d||void 0===d?void 0:d.output.replace(/[\\u001b\\u009b][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-ORZcf-nqry=><]/g,\"\")}))),W(\"div\",{className:\"field\"},W(\"label\",{className:\"label\"},\"Error Logs\"),W(\"div\",{className:\"control \".concat(!d||b?\"is-loading\":\"\")},W(\"textarea\",{className:\"textarea\",readOnly:!0,rows:15,value:null===d||void 0===d?void 0:d.error.replace(/[\\u001b\\u009b][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-ORZcf-nqry=><]/g,\"\")}))))}}];var K=Math.pow(1024,2);var X=function(e){var t=Object(r.a)({},e),n=Object(o.useState)(0),a=n[0],l=n[1],i=t.app,s=i.pid,c=z[a].element;return W(\"div\",{className:\"box\"},W(\"div\",null,W(\"p\",{style:{marginBottom:\"-2rem\"}},\"pid: \",s)),W(\"div\",{className:\"tabs is-centered\"},W(\"ul\",null,z.map((function(e,t){return W(\"li\",{key:e.title,className:t==a?\"is-active\":\"\",onClick:function(){return l(t)}},W(\"a\",null,e.title))})))),W(c,{app:i}))},Z=i.a.createElement,Q=(Math.pow(1024,2),function(e){var t=e.apps;return Z(\"div\",{className:\"container\"},Z(\"style\",null,\"\\n        tr { display: flex; }\\n        tr > th, td { flex: 1; text-align: center!important; }\\n        .is-online > th { border-color: #48c774!important; }\\n        .is-offline > th { border-color: #f14668!important; }\\n        .auto-overflow > th, td { overflow: auto;  }\\n      \"),t.map((function(e,t){return Z(X,{key:\"\".concat(e.pid,\"_\").concat(t),app:e})})))}),Y=n(\"v9gO\"),$=i.a.createElement;t.default=Object(d.a)(Object(f.a)((function(){var e,t,n,a,i,d,f,b,O=Object(o.useRef)(!0),h=Object(c.d)((function(e){return e.client})),g=Object(o.useState)(!1),y=g[0],j=g[1],w=Object(o.useState)(null),E=w[0],N=w[1],x=Object(s.useRouter)().query.id,P=Object(u.a)(\"/api/apps/\".concat(x),p.a,{refreshInterval:3e3}),_=P.data,S=P.error,L=P.isValidating,A=P.revalidate,k=!L&&(_||S);if(!_||S)return $(m.a,null,$(U,{title:x,canUpdate:k,onUpdate:function(){return A()}},S?$(B.a,{style:{width:\"100%\"},title:null!==(a=null===(i=S.response)||void 0===i?void 0:i.statusText)&&void 0!==a?a:\"Error\",text:null!==(d=null===(f=S.response)||void 0===f?void 0:null===(b=f.data)||void 0===b?void 0:b.message)&&void 0!==d?d:S.toString()}):$(\"progress\",{className:\"progress is-small is-info\",max:\"100\"},\"Loading...\")));var R=null!==(e=null===(t=h.apps.find((function(e){return e.id===x})))||void 0===t?void 0:t.right)&&void 0!==e?e:0,I=h.isAdmin||(R&Y.a.MANAGE)===Y.a.MANAGE,q=h.isAdmin||(R&Y.a.DELETE)===Y.a.DELETE,H=_.app,F=(H.pm_id,H.name),W=H.exec_mode,z=H.instances,K=null===(n=z[0])||void 0===n?void 0:n.pm2_env.status,X=K===M.a.ONLINE||K===M.a.LAUNCHING||K===M.a.ONE_LAUNCH,Z=W===M.b.CLUSTER,ee={status:K};y&&(ee.loading=!0);var te=function(e){var t,n,r,a,o;return l.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return j(!0),N(null),i.prev=2,i.next=5,l.a.awrap(v.a.post(\"/api/apps/\".concat(F),{action:e}));case 5:i.next=10;break;case 7:i.prev=7,i.t0=i.catch(2),O&&N([null!==(t=null===(n=i.t0.response)||void 0===n?void 0:n.statusText)&&void 0!==t?t:\"Error\",null!==(r=null===(a=i.t0.response)||void 0===a?void 0:null===(o=a.data)||void 0===o?void 0:o.message)&&void 0!==r?r:i.t0.toString()]);case 10:if(!O){i.next=14;break}return i.next=13,l.a.awrap(A());case 13:j(!1);case 14:case\"end\":return i.stop()}}),null,null,[[2,7]],Promise)};return $(m.a,null,$(\"div\",{className:\"container panel is-info\"},$(\"div\",{className:\"panel-heading\"},x,Z&&$(V.a,{pull:null}),$(\"a\",{className:\"button button-primary is-pulled-right is-light is-outlined \".concat(k?\"\":\"is-loading\"),style:{marginTop:\"-6px\"},onClick:function(){return A()}},\"Update\")),$(\"div\",{className:\"panel-block is-block\"},$(\"style\",null,\".is-inline-flex > button { flex: 1; }\"),$(\"div\",{className:\"buttons is-inline-flex\",style:{width:\"100%\"}},$(T,Object(r.a)({},ee,{disabled:!I,onClick:function(){return te(X?G.a.STOP:G.a.START)}})),Z&&$(J,Object(r.a)({},ee,{disabled:!I,onClick:function(){return te(G.a.RELOAD)}})),$(D,Object(r.a)({},ee,{disabled:!I,onClick:function(){return te(G.a.RESTART)}})),$(C,Object(r.a)({},ee,{disabled:!q,onClick:function(){return te(G.a.DELETE)}})),E&&$(B.a,{color:\"is-warning\",style:{width:\"100%\",marginBottom:\"10px\"},title:E[0],text:E[1]})))),$(Q,{apps:z}))})))},mBNB:function(e,t,n){\"use strict\";var r,a;n.d(t,\"a\",(function(){return r})),n.d(t,\"b\",(function(){return a})),function(e){e.ONLINE=\"online\",e.STOPPING=\"stopping\",e.STOPPED=\"stopped\",e.LAUNCHING=\"launching\",e.ERRORED=\"errored\",e.ONE_LAUNCH=\"one-launch-status\"}(r||(r={})),function(e){e.CLUSTER=\"cluster_mode\",e.FORK=\"fork_mode\"}(a||(a={}))},nLWT:function(e,t,n){\"use strict\";var r;n.d(t,\"a\",(function(){return r})),function(e){e.START=\"start\",e.STOP=\"stop\",e.RESTART=\"restart\",e.RELOAD=\"reload\",e.DELETE=\"delete\"}(r||(r={}))},rePB:function(e,t,n){\"use strict\";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,\"a\",(function(){return r}))},v9gO:function(e,t,n){\"use strict\";var r;n.d(t,\"a\",(function(){return r})),function(e){e[e.NONE=0]=\"NONE\",e[e.VIEW=1]=\"VIEW\",e[e.MANAGE=2]=\"MANAGE\",e[e.DELETE=4]=\"DELETE\",e[e.INTERACT=8]=\"INTERACT\"}(r||(r={}))},yLpj:function(e,t){var n;n=function(){return this}();try{n=n||new Function(\"return this\")()}catch(r){\"object\"===typeof window&&(n=window)}e.exports=n}},[[\"TPrw\",0,2,1,4,10,11]]]);"}